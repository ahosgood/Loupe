/**
 * Shadow Zoomables 0.9.6 | Andrew Hosgood - 17/01/2014
 */
(function(e,t){try{if(t){t.fn.zoomables=function(n,r){var i=this,s=t.extend({},t.fn.zoomables.objDefaultOptions,r),o=[],u={},a=null,f=s.loupeWidth,l=0,c=0,h=function(){if(g()){if(s.loupePosition==="n"||s.loupePosition==="e"||s.loupePosition==="s"||s.loupePosition==="w"){p=f/2}else{p=Math.sqrt(Math.pow(f,2)/2)/2}}else{p=0}},p=f,d=false,v=function(){var e=navigator.userAgent,t=e.indexOf("MSIE ");return t===-1?false:parseFloat(e.substring(t+5,e.indexOf(";",t)))},m=function(){if(navigator.userAgent.indexOf("Android")!==-1){m=function(){return true}}else{m=function(){return false}}},g=function(){return("ontouchstart"in e||"onmsgesturechange"in e)&&!v()},y=t(e),b={jqoTarget:null,jqoEnlargedImage:null,intLoupeX:0,intLoupeY:0,intWindowScrollX:y.scrollLeft(),intWindowScrollY:y.scrollTop(),blDoFirstDraw:false},w=function(e,n,r,i,a){var c=e.width(),h=e.height(),v=y.scrollTop(),g=y.scrollLeft(),w=e.offset().left,E=e.offset().top,S=0,x=0,T=0,N=0,C=f,k=0;r+=g-b.intWindowScrollX+(m()?g:0);i+=v-b.intWindowScrollY+(m()?v:0);b.jqoTarget=e,b.jqoEnlargedImage=n,b.intLoupeX=r,b.intLoupeY=i,b.intWindowScrollX=g,b.intWindowScrollY=v,b.blDoFirstDraw=a;if(s.loupeResize&&o.length>1){var L=Math.sqrt(Math.pow(u[o[0]].x-u[o[1]].x,2)+Math.pow(u[o[0]].y-u[o[1]].y,2)),C=f+(L-l)*s.separationScaling;if(C<s.loupeWidthMin){C=s.loupeWidthMin}else if(C>s.loupeWidthMax){C=s.loupeWidthMax}k=C-f}if((d||!d&&(s.loupePosition==="n"||s.loupePosition==="s"))&&r<w){r=w}else if((d||!d&&(s.loupePosition==="n"||s.loupePosition==="s"))&&r>w+c){r=w+c}else if((s.loupePosition==="sw"||s.loupePosition==="w"||s.loupePosition==="nw")&&r<w+p){r=w+p}else if((s.loupePosition==="ne"||s.loupePosition==="e"||s.loupePosition==="se")&&r<w-p){r=w-p}else if((s.loupePosition==="sw"||s.loupePosition==="w"||s.loupePosition==="nw")&&r>w+c+p){r=w+c+p}else if((s.loupePosition==="ne"||s.loupePosition==="e"||s.loupePosition==="se")&&r>w+c-p){r=w+c-p}if((d||!d&&(s.loupePosition==="e"||s.loupePosition==="w"))&&i<E){i=E}else if((d||!d&&(s.loupePosition==="e"||s.loupePosition==="w"))&&i>E+h){i=E+h}else if((s.loupePosition==="n"||s.loupePosition==="ne"||s.loupePosition==="nw")&&i<E+p){i=E+p}else if((s.loupePosition==="se"||s.loupePosition==="s"||s.loupePosition==="sw")&&i<E-p){i=E-p}else if((s.loupePosition==="n"||s.loupePosition==="ne"||s.loupePosition==="nw")&&i>E+h+p){i=E+h+p}else if((s.loupePosition==="se"||s.loupePosition==="s"||s.loupePosition==="sw")&&i>E+h-p){i=E+h-p}T=(i-E)/h*100;N=(r-w)/c*100;if(!d){switch(s.loupePosition){case"n":T=(i-E-p)/h*100;break;case"ne":T=(i-E-p)/h*100;N=(r-w+p)/c*100;break;case"e":N=(r-w+p)/c*100;break;case"se":T=(i-E+p)/h*100;N=(r-w+p)/c*100;break;case"s":T=(i-E+p)/h*100;break;case"sw":T=(i-E+p)/h*100;N=(r-w-p)/c*100;break;case"w":N=(r-w-p)/c*100;break;case"nw":T=(i-E-p)/h*100;N=(r-w-p)/c*100;break}}switch(s.loupePosition){case"n":S=-k/2;x=-(p+k);break;case"ne":S=p;x=-(p+k);break;case"e":S=p;x=-k/2;break;case"se":S=p;x=p;break;case"s":S=-k/2;x=p;break;case"sw":S=-(p+k);x=p;break;case"w":S=-(p+k);x=-k/2;break;case"nw":S=-(p+k);x=-(p+k);break}N=N*(1+s.imageMargin*2)-s.imageMargin*100;T=T*(1+s.imageMargin*2)-s.imageMargin*100;var A={width:C+"px",height:C+"px",margin:"-"+(f/2+s.loupeBorderWidth)+"px 0 0 -"+(f/2+s.loupeBorderWidth)+"px",top:i+"px",left:r+"px",backgroundPosition:n.hasClass("loaded")?N+"% "+T+"%":"center",transform:"translate("+(S-g)+"px, "+(x-v)+"px)"};if(a===true){t("."+s.loupeClass).fadeOut(),n.css(A).stop(true,true).fadeIn()}else{n.css(A)}},E=function(){if(g()){b.intWindowScrollX=y.scrollLeft(),b.intWindowScrollY=y.scrollTop()}if(b.jqoTarget!==null){w(b.jqoTarget,b.jqoEnlargedImage,b.intLoupeX,b.intLoupeY,false)}},S=function(){var e=new Date,t=e.getMilliseconds().toString();if(t.length<3){for(var n=0;n<3;n++){t="0"+t}}return parseInt(Math.floor(e.getTime()/1e3)+t.substr(-3))};h();i.find("["+n+"]").css({cursor:"none","-webkit-touch-callout":"none","-khtml-touch-callout":"none","-moz-touch-callout":"none","-ms-touch-callout":"none","-o-touch-callout":"none","touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"}),t("html").on("touchstart",function(e){for(var r in e.originalEvent.changedTouches){var i=e.originalEvent.changedTouches[r];if(typeof i==="object"){var h=t(i.target),p=i.identifier;if(o.length||!o.length&&h.attr(n)){o.push(p);u[p]={x:i.screenX,y:i.screenY};if(a===null){a=h.attr(n);var d=t("."+s.loupeClass+'[data-zoomablesfullimage="'+a+'"]');if(!d.length){d=t('<div class="'+s.loupeClass+'" data-zoomablesfullimage="'+a+'"/>').css({width:f+"px",height:f+"px",margin:"-"+(f/2+s.loupeBorderWidth)+"px 0 0 -"+(f/2+s.loupeBorderWidth)+"px",position:"fixed",top:"0",left:"0",background:"url("+s.loaderImage+") center no-repeat "+s.loaderImageBackground,backgroundSize:"50px 50px",border:s.loupeBorderWidth+"px "+s.loupeBorderColour+" solid",borderRadius:s.loupeWidthMax/2+"px",boxShadow:"3px 3px 10px rgba(0, 0, 0, 0.5), inset 0 0 3px rgba(0, 0, 0, 0.5)",cursor:"none",zIndex:s.loupeZIndex,"-webkit-touch-callout":"none","-khtml-touch-callout":"none","-moz-touch-callout":"none","-ms-touch-callout":"none","-o-touch-callout":"none","touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"}).on("dbltap",function(){c=0}).hide().appendTo("body");if(!d.hasClass("loading")){var v=a;t('<img src="'+v+'"/>').on("load",function(){d.removeClass("loading").addClass("loaded").css({background:"url("+v+") 0 0 no-repeat "+s.loupeBackgroundColour,backgroundSize:"auto"}),t(this).remove()}).css({width:"0",height:"0"}).appendTo("body");d.addClass("loading")}}if(o.length){w(h,d,u[o[0]].x,u[o[0]].y,true)}}else{if(o.length>1){l=Math.sqrt(Math.pow(u[o[0]].x-u[o[1]].x,2)+Math.pow(u[o[0]].y-u[o[1]].y,2))}}}}}}).on("touchmove",function(e){for(var r in e.originalEvent.changedTouches){var i=e.originalEvent.changedTouches[r];if(typeof i==="object"){var f=t(i.target),l=i.identifier;if(o.length>1||o.length===1&&f.attr(n)){e.preventDefault();var c=t("."+s.loupeClass+'[data-zoomablesfullimage="'+a+'"]');if(l===o[0]){w(f,c,i.screenX,i.screenY)}else if(l===o[1]){u[l]={x:i.screenX,y:i.screenY}}}}}}).on("touchend",function(e){var n;for(var r in e.originalEvent.changedTouches){var i=e.originalEvent.changedTouches[r];if(s.loupeResize&&o.length>1){var p=Math.sqrt(Math.pow(u[o[0]].x-u[o[1]].x,2)+Math.pow(u[o[0]].y-u[o[1]].y,2)),d=f+(p-l)*s.separationScaling;if(d<s.loupeWidthMin){d=s.loupeWidthMin}else if(d>s.loupeWidthMax){d=s.loupeWidthMax}f=d;h()}if(typeof i==="object"){n=t("."+s.loupeClass+'[data-zoomablesfullimage="'+a+'"]');o.splice(o.indexOf(i.identifier),1)}}if(o.length===0){a=null;if(n.length){var v=S();n.stop(true,true).fadeOut();if(v-c<s.doubleTapSpeed){n.trigger("dbltap")}c=v;b.jqoTarget=null}}}),i.on("mouseenter","["+n+"]",function(r){b.jqoTarget=t(this),a=b.jqoTarget.attr(n);var i=t("."+s.loupeClass+'[data-zoomablesfullimage="'+a+'"]');if(!i.length){i=t('<div class="'+s.loupeClass+'" data-zoomablesfullimage="'+a+'"/>').css({width:f+"px",height:f+"px",margin:"-"+(f/2+s.loupeBorderWidth)+"px 0 0 -"+(f/2+s.loupeBorderWidth)+"px",position:"fixed",top:"0",left:"0",background:"url("+s.loaderImage+") center no-repeat "+s.loaderImageBackground,backgroundSize:"50px 50px",border:s.loupeBorderWidth+"px "+s.loupeBorderColour+" solid",borderRadius:"100px",boxShadow:"3px 3px 10px rgba(0, 0, 0, 0.5), inset 0 0 3px rgba(0, 0, 0, 0.5)",zIndex:s.loupeZIndex}).hide().appendTo("body");if(!i.hasClass("loading")){var o=a;t('<img src="'+o+'"/>').on("load",function(){i.removeClass("loading").addClass("loaded").css({background:"url("+o+") 0 0 no-repeat "+s.loupeBackgroundColour,backgroundSize:"auto"}),t(this).remove()}).css({width:"0",height:"0"}).appendTo("body");i.addClass("loading")}}var u=t(e);b.intWindowScrollX=u.scrollLeft(),b.intWindowScrollY=u.scrollTop();w(b.jqoTarget,i,r.pageX,r.pageY,true)}),t("html").on("mousemove",function(e){if(b.jqoTarget!==null){var n=t("."+s.loupeClass+'[data-zoomablesfullimage="'+a+'"]');w(b.jqoTarget,n,e.pageX,e.pageY)}}).on("mouseleave","."+s.loupeClass,function(e){var n=t("."+s.loupeClass+'[data-zoomablesfullimage="'+a+'"]');a=null;if(n){n.stop().fadeOut();b.jqoTarget=null}}).on("click","."+s.loupeClass,function(e){if(!g()){e.preventDefault();var n=t(this)}}),t(document).on("scroll",E);return this},t.fn.zoomables.objDefaultOptions={doubleTapSpeed:350,imageMargin:.15,intentDelay:400,intentDistance:50,loaderImage:"",loaderImageSize:"50px 50px",loaderImageBackground:"#D8D8D8",loupeBackgroundColour:"#FFF",loupeBorderColour:"#FFF",loupeBorderWidth:3,loupeClass:"zoomables-loupe",loupePosition:"nw",loupeResize:false,loupeWidth:200,loupeWidthMax:400,loupeWidthMin:125,loupeZIndex:99,separationScaling:1.25}}else{throw"Shadow Zoomables requires jQuery to run"}}catch(n){if(e.console){if(e.console.error){console.error(n)}else if(e.console.log){console.log(n)}}}})(window,jQuery)